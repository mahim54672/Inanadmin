<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel - Istiak Ahmmed Enan</title>
<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
<style>
body { font-family: 'Segoe UI', sans-serif; background:#f4f7f9; margin:0; padding:0; }
header { background:#1a1a1a; color:white; padding:15px 20px; display:flex; align-items:center; }
header img { height:50px; margin-right:15px; }
header h1 { margin:0; font-size:1.8em; }
main { padding:20px; max-width:900px; margin:auto; }
h2 { margin-bottom:10px; }
input, textarea { width:100%; padding:10px; margin:5px 0 10px 0; border-radius:5px; border:1px solid #ccc; }
button { padding:10px 15px; background:#007BFF; color:white; border:none; border-radius:5px; cursor:pointer; transition:0.3s; }
button:hover { background:#0056b3; }
.admin-post { background:white; padding:15px; border-radius:8px; margin-bottom:10px; display:flex; justify-content:space-between; align-items:center; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
.admin-post span button { margin-left:5px; background:#dc3545; }
.admin-post span button.edit-btn { background:#28a745; }
.admin-post span button:hover { opacity:0.8; }
</style>
</head>
<body>

<header>
<img src="https://i.postimg.cc/L6Zn3WGx/20250919-175043.png" alt="Logo">
<h1>Istiak Ahmmed Enan - Admin</h1>
</header>

<main>
<h2>Add New Post</h2>
<input type="text" id="postTitle" placeholder="Post Title">
<textarea id="postDescription" placeholder="Post Description"></textarea>
<input type="text" id="postImage" placeholder="Image URL (Optional)">
<button onclick="addPost()">Add Post</button>

<h2 style="margin-top:30px;">All Posts</h2>
<div id="adminPostsList"></div>
</main>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyC8iKwJ06g29H8qv1xDD1mKDN5uIIKiPaY",
  authDomain: "istiak-ahmmed-enan.firebaseapp.com",
  databaseURL: "https://istiak-ahmmed-enan-default-rtdb.firebaseio.com",
  projectId: "istiak-ahmmed-enan",
  storageBucket: "istiak-ahmmed-enan.firebasestorage.app",
  messagingSenderId: "969564579404",
  appId: "1:969564579404:web:c0abe00858e71d5c18b6e9",
  measurementId: "G-DHT284WQHQ"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();

const adminPostsList = document.getElementById('adminPostsList');

function addPost() {
  const title = document.getElementById('postTitle').value;
  const description = document.getElementById('postDescription').value;
  const image = document.getElementById('postImage').value;

  if(title && description){
    const newPostKey = db.ref().child('posts').push().key;
    db.ref('posts/' + newPostKey).set({
      title,
      description,
      image: image || '',
      timestamp: Date.now()
    });
    document.getElementById('postTitle').value='';
    document.getElementById('postDescription').value='';
    document.getElementById('postImage').value='';
  } else {
    alert('Title and Description are required!');
  }
}

function loadAdminPosts(){
  db.ref('posts').orderByChild('timestamp').on('value', snapshot=>{
    adminPostsList.innerHTML = '';
    const posts = snapshot.val();
    if(posts){
      Object.keys(posts).reverse().forEach(key=>{
        const post = posts[key];
        const div = document.createElement('div');
        div.className='admin-post';
        div.innerHTML=`
          <strong>${post.title}</strong>
          <span>
            <button class="edit-btn" onclick="editPost('${key}')">Edit</button>
            <button onclick="deletePost('${key}')">Delete</button>
          </span>
        `;
        adminPostsList.appendChild(div);
      });
    }
  });
}

function deletePost(key){
  if(confirm('Are you sure to delete this post?')){
    db.ref('posts/'+key).remove();
  }
}

function editPost(key){
  db.ref('posts/'+key).get().then(snapshot=>{
    if(snapshot.exists()){
      const post = snapshot.val();
      const newTitle = prompt('Edit Title', post.title);
      const newDesc = prompt('Edit Description', post.description);
      const newImage = prompt('Edit Image URL', post.image);
      if(newTitle && newDesc){
        db.ref('posts/'+key).update({
          title: newTitle,
          description: newDesc,
          image: newImage
        });
      }
    }
  });
}

loadAdminPosts();
</script>

</body>
</html>